module.exports = function (buffer) {
	return new Promise((resolve, reject) => {
		let error;
		let data;
		try {
			buffer.toString().replace(/(^[\s\S]*?)\s*---+\s*([\s\S]*)$/, (match, head, body) => {
				data = JSON.parse(head);
				data.html = body;
				if (data.date) {
					data.date = new Date(data.date);
				}
			});
		} catch (err) {
			error = err;
		}
		if (data) {
			resolve(data);
		} else {
			reject(error || new Error('Failed to get data'));
		}
	});
};
